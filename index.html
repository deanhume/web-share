<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Getting Started with the Web Share API</title>
	<link rel="canonical" href="https://deanhume.github.io/web-share/">
	<meta http-equiv="origin-trial" data-feature="Web Share" data-expires="2017-04-04" content="AsXyKFASjvpxkgJW0h4/xCPKyCi8iIQveiFeje8kImk4vfQg4k6+BnK7R7VldUw9/nlfAviJ2ho7t8Vz2hVVjwYAAABneyJvcmlnaW4iOiJodHRwczovL2RlYW5odW1lLmdpdGh1Yi5pbzo0NDMiLCJmZWF0dXJlIjoiV2ViU2hhcmUiLCJleHBpcnkiOjE0OTEzMzcwMTAsImlzU3ViZG9tYWluIjp0cnVlfQ==">
</head>
<style>
	div {
		width: 200px;
		height: 200px;
	}
	
	p {
		text-align: center;
		font-size: 24px;
	}
	
	a {
		text-decoration: none;
	}
</style>

<body>
	<div>
		<a id="shareThis" href="http://pinterest.com/pin/create/button/?url=https%3A%2F%2Fdeanhume.com%2F&media=https%3A%2F%2Fdeanhume.github.io%2Fweb-share%2Fimages%2Fpinterest.png&description=The%20Web%20Share%20API!">
			<img width="200" height="200" src="./images/pinterest.png" title="Pin It" />
			<p>Share this!</p>
		</a>
	</div>

	<div id="support"></div>
	<script>
		var shareButton = document.getElementById('shareThis');
		var supported = document.getElementById('support');

		// Listen for any clicks
		shareButton.addEventListener('click', function (ev) {
			// Check if the current browser supports the Web Share API
			if (navigator.share !== undefined) {

				// Get the canonical URL from the link tag
				var shareUrl = document.querySelector('link[rel=canonical]') ? document.querySelector('link[rel=canonical]').href : window.location.href;

				// Share it!
				navigator.share({
					title: document.title,
					url: shareUrl
				}).then(() => console.log('Successful share'))
					.catch((error) => console.log('Error sharing:', error));

				ev.preventDefault();
			} else {
				supported.innerHTML = "Unfortunately, this feature is not supported on your browser";
			}
		});
	</script>
</body>

</html>